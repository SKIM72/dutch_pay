# 정산 관리 애플리케이션 개발 블루프린트

## 1. 프로젝트 개요

두 명 이상의 사용자가 발생하는 비용을 효율적으로 정산하고 기록하기 위한 웹 애플리케이션입니다. 사용자는 각 정산 건에 대한 기준 통화를 설정할 수 있으며, 여러 통화로 입력된 지출을 기준 통화로 자동 환산하여 정산의 편의성을 극대화합니다.

## 2. 주요 기능

- **정산 건별 관리:**
    - 날짜를 기준으로 '오사카 여행'과 같이 정산 건을 생성하고 관리합니다.
    - 각 정산 건마다 참여자 이름(예: 철수, 영희)을 자유롭게 지정할 수 있습니다.
    - 정산 건별 삭제 기능을 제공하며, 삭제 전 확인 절차를 거칩니다.

- **다중 통화 및 환율 관리:**
    - 새로운 정산 건 생성 시, 기준 통화(USD, JPY, KRW)를 선택할 수 있습니다.
    - 개별 지출 항목 입력 시, 실제 지출된 통화(USD, JPY, KRW)를 선택할 수 있습니다.
    - 정산 건의 '정산 일자'를 기준으로 실시간 환율을 자동 조회합니다.
    - 입력된 지출을 정산 건의 기준 통화로 자동 환전하여 모든 계산(총액, 최종 정산)에 반영합니다.
    - 정산 화면의 날짜 배지 클릭 시, 해당 날짜의 기준 환율 정보를 모달 창으로 표시합니다.

- **유연한 비용 분담:**
    - **1/N 정산:** 총액을 인원수로 동일하게 나눕니다.
    - **금액 직접 입력:** 각 참여자가 부담할 금액을 직접 입력할 수 있습니다.

- **정산 상태 관리:**
    - '정산 중'과 '정산 완료' 상태를 관리하여 정산 과정을 명확히 합니다.
    - **사용자가 버튼 클릭으로 '정산 완료'와 '정산 중' 상태를 직접 전환(정산 완료 취소)할 수 있습니다. (신규)**
    - 정산 완료 후 지출 내역이 변경되면 자동으로 다시 '정산 중' 상태로 전환됩니다.

- **데이터 관리 및 내보내기:**
    - 상세 지출 내역을 테이블 형태로 관리하며, 개별 항목 삭제가 가능합니다.
    - 전체 지출 내역을 **엑셀(.xlsx) 파일로 다운로드**할 수 있습니다.

- **사용자 경험(UX) 및 접근성:**
    - 모든 금액 입력 필드에 쉼표(,) 구분 기호를 자동으로 적용하여 가독성을 높입니다.
    - 다국어(한국어, 영어, 일본어) 지원 및 브라우저 언어 설정을 자동 감지합니다.
    - PC와 모바일 등 다양한 디바이스에 최적화된 반응형 웹 디자인을 제공합니다.

## 3. 개발 계획

### 1단계: 기본 구조 및 핵심 기능 구현 (완료)
- `index.html`, `style.css`, `main.js` 기본 구조 완성
- 정산 건 생성/관리, 비용 추가, 1/N 분담 계산 로직 구현

### 2단계: 고급 기능 및 UX 개선 (완료)
- 다국어(i18n) 기능, 상세/정산 건별 삭제 기능 구현
- 분담 방식 옵션(금액 직접 입력) 추가 및 UX 개선
- 금액 입력 필드 자동 서식, 정산 완료 상태 관리 기능 추가
- 엑셀 다운로드 기능 구현

### 3단계: 환율 연동 및 통화 기능 구현 (완료)
- 환율 연동 모달 UI 및 로직 구현
- 기준 통화 기반 자동 환전 및 계산 로직 적용

### 4단계: UX 개선 및 정산 완료 취소 기능 (현재 진행중)
- **UI 개선:** **정산 결과 카드 레이아웃 재배치**
- **기능 구현:** **정산 완료/취소 토글 기능 로직 구현**
- **UI/UX:** 정산 완료 시 입력 폼 비활성화 처리

### 5단계: 데이터 영속성 확보
- Supabase 프로젝트 생성 및 테이블 설계
- 데이터 조회, 추가, 수정, 삭제(CRUD) 기능 연동하여 모든 정보를 서버에 저장

### 6단계: 최종 디자인 및 사용성 개선
- CSS를 이용한 시각적 완성도 향상 및 사용자 피드백 반영
